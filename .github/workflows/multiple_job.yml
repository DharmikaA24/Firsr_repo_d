name: Multiple jobs
on :
    push
jobs:
    build_job:
        runs-on: ubuntu-latest
        steps:
            
            - name: Install cowsay program
              run: |
                    sudo apt-get update
                    sudo apt-get install cowsay -y

            - name: Execute cowsay CMD
              run: cowsay -f dragon "I'm a dragon .......RAWR">>dragon.txt

            - name: upload dragon text file
              uses: actions/upload-artifact@v3
              with:
                name: Dragon-text-file
                path: dragon.txt


    
    test_job:
        needs: build_job
        runs-on: ubuntu-latest
        steps:
            - name: download dragon text file
              uses: actions/download-artifact@v3
              with:
                name: Dragon-text-file
            
            - name: Text file exists
              run: grep -i "dragon" "Dragon-text-file/dragon.txt"

    

    deploy_job:
        needs: test_job
        runs-on: ubuntu-latest
        steps:
            - name: Download dragon text file
              uses: actions/download-artifact@v3
              with:
                name: Dragon-text-file
            - name: Read files
              run: cat dragon.txt

            - name: Deploying
              run: echo Deploying....